<head>
    <meta name="generator" content="content" charset="utf-8"/>
</head>
<body>
    <div class="course">
        <div class="myCourse">
            <input type="button" value="我的课程" @click="togg"/>
            <div class="myCourseList" >
                
            </div>
        </div>
        <div class="courseDetail">
            
        </div>
        <div class="claimCourse">
            <input type="button" value="认领课程" @click="queryAll"/>
                <table>
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>id</th>
                            <th>information</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="(course, index) in courses">
                            <td>{{ course.name }}</td>
                            <td>{{ course.number }}</td>
                            <td>{{ course.information }}</td>
                            <td><input type="button" value="claim" @click="claimCourse(index)" /></td>
                        </tr>
                    </tbody>
                </table>
        </div>
    </div>

    <script type="text/javascript" src="libs/js/axios.min.js"></script>
    <script type="text/javascript" src="libs/js/vue.min.js"></script>
    <script>
     window.tId = '9000022711';
    </script>
    <script>
     let cC = new Vue({
         el: ".claimCourse",
         data:{
             courses:[]
         },
         methods:{
             queryAll:function(){
                 axios.get('api/queryCourse')
                      .then((response)=>{
                          let body = response.data;
                          if(body.code === 200)
                              {
                                  let data = body.content;
                                  cC.courses = data;
                              }
                      });
             },
             claimCourse:function(index){
                 axios.post('api/claimCourse',{
                     teacherId: window.tId,
                     courseNumber: this.courses[index].number
                 }).then(response=>{
                     let body = response.data;
                     if(body.code === 200)
                         {
                             this.courses.splice(index,1);
                         }
                 });
             }
             
         }
     })
    </script>
</body>